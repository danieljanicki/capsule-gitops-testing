---
apiVersion: capsule.clastix.io/v1beta2
kind: Tenant
metadata:
  name: test
spec:
  additionalRoleBindings:
  - clusterRoleName: cluster-admin
    subjects:
    - name: gitops-reconciler
      kind: ServiceAccount
      namespace: test-home
  owners:
  - name: system:serviceaccount:test-home:gitops-reconciler
    kind: ServiceAccount
---
apiVersion: v1
kind: Namespace
metadata:
  name: test-home
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: gitops-reconciler
  namespace: test-home
  annotations:
    capsule.addon.fluxcd/enabled: "true"
    capsule.addon.fluxcd/kubeconfig-global: "true"
---
apiVersion: capsule.clastix.io/v1beta2
kind: CapsuleConfiguration
metadata:
  name: default
spec:
  enableTLSReconciler: true
  forceTenantPrefix: true
  userGroups:
  - capsule.clastix.io
  - system:serviceaccounts:test-home

